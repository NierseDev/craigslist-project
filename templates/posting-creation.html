{% extends "base.html" %}

{% block title %}Create a Posting | Craigslist{% endblock title %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/posting-creation.css') }}">
{% endblock styles %}

{% block navbar %}
    <button style="position:absolute; right:5px;" id="account" onclick="window.location = '/account'">account</button>
{% endblock navbar %}

{% block content %}
<form id="posting-form" method="POST" action="/create-posting">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" required>

    <label for="location">Location:</label>
    <input type="text" id="location" name="location" required>

    <label for="contact">Contact:</label>
    <input type="text" id="contact" name="contact" required>

    <label for="category">Category:</label>
    <select id="category" name="category" required onchange="updateTypeOptions()">
        <option value="" disabled selected>Select a category</option>
        <option value="community">Community</option>
        <option value="services">Services</option>
        <option value="housing">Housing</option>
        <option value="for_sale">For Sale</option>
        <option value="jobs">Jobs</option>
        <option value="resumes">Resumes</option>
    </select>

    <label for="type">Type:</label>
    <select id="type" name="type" required>
        <option value="" disabled selected>Select a type</option>
    </select>   
</form>

<div id="editor-toolbar"></div>
    <select id="heading-dropdown" onchange="applyHeading(this.value)">
        <option value="" disabled selected>Heading</option>
        <option value="1">Heading 1</option>
        <option value="2">Heading 2</option>
        <option value="3">Heading 3</option>
        <option value="4">Heading 4</option>
        <option value="5">Heading 5</option>
        <option value="6">Heading 6</option>
    </select>
    <button onclick="applyMarkdown('**', '**')">Bold</button>
    <button onclick="applyMarkdown('_', '_')">Italic</button>
    <button onclick="applyMarkdown('<u>', '</u>')">Underline</button>
    <button onclick="applyMarkdown('~~', '~~')">Strikethrough</button>
    <button onclick="insertLink()">Link</button>
    <button onclick="insertImage()">Image</button>
</div>

<textarea id="markdown-editor" rows="10" cols="80"></textarea>

<div id="preview-container"></div>
    <h3>Preview</h3>
    <div id="markdown-preview" style="border: 1px solid #ccc; padding: 10px; min-height: 100px;"></div>
</div>

<button type="submit" form="posting-form">Submit</button>
{% endblock content %}

{% block postload_scripts %}
<script type="text/javascript" src="{{ url_for('static', filename='scripts/iconify.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='scripts/post-creation-preview.js') }}"></script>
<script>accountIcon();</script>
{% endblock postload_scripts %}